# Different-region Balance Method
This python code package is the software of the Regionbalance method:
"Different-region Balance Method for Discovering Varying Causal Relations Between Time Series"
about discovering the time-varying causal relationships between two time series.

## Python Dependencies
- numpy
- pandas
- scikit-learn (sklearn)
- scipy.stats
- statsmodels
- math

## Data
- simulated time series X and Y with one causal interval are generated by the code.
- real datasets Dropoff-tweet and Tweet-pickup, are from the Figure 4 of reference: 
Zhenhui Li, Guanjie Zheng, Amal Agarwal, Lingzhou Xue, Thomas Lauvaux. Discovery of Causal
Time Intervals. The Seventeenth SIAM International Conference on Data Mining, Houston, USA.,
2017:804-812

## The structure of this package:
- regionbalance_functions.py 	--- functions about data sets, result count, accuracy
- regionbalance_inference.py 	--- the different-region balance method and conventional sliding window method to discover causal relationships between two time series
- regionbalance_test_functions.py 	--- the functions about causality test
- regionbalance_example.py 	--- main function, examples of using regionbalance method
- regionbalance_example_paper.py	--- main function, examples of regionbalance method corresponding to the paper


## Citation
If this package is useful in your work, please consider the citing.
Kaijun WANG, Yuanpeng ZENG, Zhongjian MIAO. Different-region Balance Method for Exploring Varying Causal Relations Between Time Series. Journal of Electronics and Information Technology, 2021, 43(8): 2414-2420.
https://github.com/wkjwang/region_balance

## Abstract of the paper
For discovering time-varying causal relations between time series, a common method is the sliding-window method with Granger causal tests on every window. However, the method performance is sensitive to window sizes, and an unsuitable size probably leads to poor performance. The different-region balance method is proposed, and first computes the variation degree of time series in current sliding window W (called variation bound Sw), and the variation degree Su in front neighbor region U of W. Then a forward exploring strategy is designed: when Su<=Sw, a different-length-region balance test is carried out, i.e., causal-relation tests respectively in the window W, combined region of W and U, and combined region of W and back neighbor region V of W; when Su>Sw, it uses the balance test where region V has the same length as region U; finally, in each region, all the test results are synthesized to give a final result. The new method combines the results from three different-length regions to reduce its sensitivity to window sizes, and guarantees the accuracy and stability of final results. The experiments on simulated and real data sets show that, the new method can discover time-varying causal relations between time series effectively, and outperforms the comparative methods on the balance performance of high accuracy and stability.
